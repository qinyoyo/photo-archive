#### 将图像文件归档

将一个目录下的图像文件归档移动到第二个目录中。第二个目录的文件按照拍摄时间已经进行了归类。如果文件在第二个目录中找不到可以归档的子目录，则按照月份自动建档归档。

归档的文件在同级目录的Camera目录下。

##### 依赖：

```
exiftool
```

参见 https://exiftool.org/

##### 文件重复判定原则

```
1）文件名和文件大小相同，认为相同
2）以下exiftool全部相同（但不能全部为空）
    拍摄时间或文件创建时间
    拍摄设备
    拍摄镜头
    IPTCDigest
    OriginalDocumentID
  如果以上exiftool全部为空则通过1）判断
```



##### 用法 ：

```
java -jar pa.jar <options>
```

options参数：

```
-p1 dir_name	: 指定需要归档的图像文件目录, 同 --path1
-s1 : 将相同文件移到.delete目录, 同  --same1
-o1 : 将无法确定拍摄日期的文件移动到.other目录, 同  --other1
-c1 : 需要归档的目录重新分析, 同  --clear1

-p2 dir_name	: 指定归档图像文件最终保存目录,同 --path2
-s2 : 将相同文件移到.delete目录, 同  --same2
-o2 : 将无法确定拍摄日期的文件移动到.other目录, 同  --other2
-c2 : 归档目标目录重新分析, 同  --clear2

-a : 强制将path1与path2进行文件相同分析

-v  dir_name	: 对比浏览相同图像文件的目录, 同 --view

-m :  删除空目录, 同 --empty
-e :  扫描完成后立即执行归档操作, 同  --execute
-f :  完成后自动关机, 同  --shutdown

-n dir_name	<pattern> : 指定目录下文件重命名, 同 --rename

-h :  显示帮助, 同  --help
```

##### 重命名模板

```
重命名文件时，可以指定一个模板，模板可以包含以下元数据：
%y：拍摄时间年，4位
%M：拍摄时间月，2位
%d：拍摄时间日，2位
%h：拍摄时间小时，2位
%m：拍摄时间分钟，2位
%s：拍摄时间秒，2位

%o：拍摄设备
%l：拍摄位置
%u：主题代码，myStep App的足迹
%c：拍摄场景

%p：自动匹配目录名，忽略目录名前的数字和空格，如目录 201008 Canada匹配为 Canada
%f: 原文件名，排除数字和连接符号(-_)


使用默认值 ：
   可以使用 %x=defvalue%的形式指定一个缺省值 defvalue，当x取值为空时用缺省值代替。
   如 %y=2000%,表示使用年份，当没有拍摄时间时，使用2000
   默认值可以使用 {x} 的方式引用另外一个元数据
   如 %u={l}%,表示使用主题代码，当主题代码为空时，使用位置信息

%E：扩展名大写
%e：扩展名小写
    %E %e只能使用一个，任意位置

不指定模板则使用默认模板：%y%M%d-%h%m%s_%u={p}%%E
```

